# é‡‡è´­ç®¡ç†ä¼˜åŒ–è¯´æ˜

## ğŸ“‹ é—®é¢˜æ¸…å•ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šæ—¶é—´å­—æ®µè°ƒæ•´ â°

#### ç”¨æˆ·éœ€æ±‚
> "è¿™ä¸ªé‡‡è´­æ—¶é—´æ”¹ä¸ºå…¥åº“æ—¶é—´ï¼Œå°†åˆ›å»ºæ—¶é—´æ”¹ä¸ºé‡‡è´­æ—¶é—´ï¼Œåˆ›å»ºè¿™ä¸ªè®¢å•çš„æ—¶å€™å°±æ˜¯é‡‡è´­æ—¶é—´ï¼Œç‚¹å‡»å…¥åº“çš„æ—¶å€™ç¡®è®¤å…¥åº“çš„æ—¶å€™å°±æ˜¯å…¥åº“æ—¶é—´"

#### åŸè®¾è®¡
- `purchaseDate` (DATE) - é‡‡è´­æ—¥æœŸ
- `createTime` (DATETIME) - åˆ›å»ºæ—¶é—´
- ç¼ºå°‘å…¥åº“æ—¶é—´å­—æ®µ

#### æ–°è®¾è®¡
- `createTime` (DATETIME) - **é‡‡è´­æ—¶é—´**ï¼ˆåˆ›å»ºè®¢å•æ—¶è‡ªåŠ¨å¡«å……ï¼‰
- `inboundTime` (DATETIME) - **å…¥åº“æ—¶é—´**ï¼ˆç¡®è®¤å…¥åº“æ—¶è®¾ç½®ï¼‰
- ç§»é™¤ `purchaseDate` å­—æ®µ

#### ä¿®æ”¹å†…å®¹

**1. åç«¯å®ä½“ç±»** (`PurchaseOrder.java`)
```java
// ç§»é™¤
@TableField("purchase_date")
private LocalDate purchaseDate;

// æ–°å¢
@TableField("inbound_time")
private LocalDateTime inboundTime;

// çŠ¶æ€æ³¨é‡Šæ›´æ–°
/**
 * è®¢å•çŠ¶æ€ï¼š0-å¾…å®¡æ ¸ï¼Œ1-å¾…å…¥åº“ï¼ˆå®¡æ ¸é€šè¿‡ï¼‰ï¼Œ2-å·²æ‹’ç»ï¼Œ3-å·²å…¥åº“
 */
private Integer status;
```

**2. Serviceå±‚** (`PurchaseOrderServiceImpl.java`)
```java
// åˆ›å»ºè®¢å•æ—¶ - ç§»é™¤purchaseDateè®¾ç½®
// createTimeä¼šè‡ªåŠ¨å¡«å……ï¼Œä½œä¸ºé‡‡è´­æ—¶é—´

// ç¡®è®¤å…¥åº“æ—¶ - è®¾ç½®å…¥åº“æ—¶é—´
order.setStatus(3); // å·²å…¥åº“
order.setInboundTime(LocalDateTime.now()); // è®¾ç½®å…¥åº“æ—¶é—´
purchaseOrderMapper.updateById(order);
```

**3. å‰ç«¯ç•Œé¢** (`Purchase.vue`)
```vue
<!-- åˆ—è¡¨é¡µ -->
<el-table-column prop="createTime" label="é‡‡è´­æ—¶é—´" width="180" />
<el-table-column prop="inboundTime" label="å…¥åº“æ—¶é—´" width="180" />

<!-- è¯¦æƒ…é¡µ -->
<el-descriptions-item label="é‡‡è´­æ—¶é—´">
  {{ formatTime(viewData.createTime) }}
</el-descriptions-item>
<el-descriptions-item label="å…¥åº“æ—¶é—´">
  {{ formatTime(viewData.inboundTime) }}
</el-descriptions-item>
```

---

### é—®é¢˜2ï¼šå®¡æ ¸æƒé™æ§åˆ¶ ğŸ”

#### ç”¨æˆ·éœ€æ±‚
> "è¿™ä¸ªå®¡æ ¸æŒ‰é’®åªæœ‰åœ¨adminç®¡ç†å‘˜æ“ä½œæ—¶æ‰èƒ½å±•ç¤ºï¼Œæˆ‘åˆšåˆšæµ‹è¯•äº†ä¸€ä¸‹æ¢æˆäº†purchaseré‡‡è´­å‘˜è´¦å·åŒæ ·ä¹Ÿèƒ½å®¡æ ¸é€šè¿‡ï¼Œä½ ä¿®æ”¹ä¸€ä¸‹åªæœ‰adminç®¡ç†å‘˜æ‰å¯ä»¥å®¡æ ¸ï¼Œå…¶ä»–è´¦å·ç›´æ¥æ²¡æœ‰è¿™ä¸ªæŒ‰é’®è¦ç­‰ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡äº†ä¹‹åæ‰å¯ä»¥å®¡æ ¸é€šè¿‡"

#### åŸå®ç°é—®é¢˜
```javascript
const isAdmin = ref(true) // ç¡¬ç¼–ç ï¼Œæ‰€æœ‰äººéƒ½æ˜¯ç®¡ç†å‘˜
```

#### æ–°å®ç°æ–¹æ¡ˆ
```javascript
import { useUserStore } from '@/store/user'

const userStore = useUserStore()

// ä»ç”¨æˆ·ä¿¡æ¯ä¸­è·å–è§’è‰²ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜
const isAdmin = computed(() => {
  return userStore.userInfo?.username === 'admin'
})
```

#### æŒ‰é’®æ˜¾ç¤ºé€»è¾‘
```vue
<el-button
  v-if="row.status === 0 && isAdmin"
  type="warning"
  link
  @click="handleAudit(row)"
>
  å®¡æ ¸
</el-button>
```

**æƒé™æ§åˆ¶è§„åˆ™**ï¼š
- âœ… **adminè´¦å·**ï¼šå¯ä»¥çœ‹åˆ°"å®¡æ ¸"æŒ‰é’®
- âŒ **purchaserè´¦å·**ï¼šçœ‹ä¸åˆ°"å®¡æ ¸"æŒ‰é’®
- âŒ **å…¶ä»–è´¦å·**ï¼šçœ‹ä¸åˆ°"å®¡æ ¸"æŒ‰é’®

---

### é—®é¢˜3ï¼šçŠ¶æ€æµè½¬ä¿®æ­£ ğŸ”„

#### ç”¨æˆ·éœ€æ±‚
> "æˆ‘å‘ç°è¿™ä¸ªçŠ¶æ€æœ‰é—®é¢˜ï¼Œæˆ‘è¦çš„æ•ˆæœæ˜¯å½“åˆ›å»ºäº†è¿™ä¸ªé‡‡è´­å•åï¼ŒçŠ¶æ€ä¸ºå¾…å®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡å¤Ÿä¸ºå¾…å…¥åº“ï¼Œå…¥åº“åä¸ºå·²å…¥åº“ï¼Œè¯·ä½ ä¿®æ”¹ä¸€ä¸‹ï¼Œè°¢è°¢"

#### åŸçŠ¶æ€å®šä¹‰
```
0 - å¾…å®¡æ ¸
1 - å·²é€šè¿‡  âŒ (ä¸æ˜ç¡®)
2 - å·²æ‹’ç»
3 - å·²å…¥åº“
```

#### æ–°çŠ¶æ€å®šä¹‰
```
0 - å¾…å®¡æ ¸
1 - å¾…å…¥åº“  âœ… (å®¡æ ¸é€šè¿‡å)
2 - å·²æ‹’ç»
3 - å·²å…¥åº“
```

#### çŠ¶æ€æµè½¬å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ›å»ºè®¢å• â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¾…å®¡æ ¸(0)â”‚ â† æ–°å»ºè®¢å•
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ [ç®¡ç†å‘˜å®¡æ ¸]
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚
     â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¾…å…¥åº“(1)â”‚ â”‚ å·²æ‹’ç»(2)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚           â”‚
     â”‚           â””â”€â†’ ç»“æŸ
     â”‚
     â”‚ [ç¡®è®¤å…¥åº“]
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å·²å…¥åº“(3)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â””â”€â†’ å®Œæˆ
```

#### ä¿®æ”¹å†…å®¹

**1. åç«¯çŠ¶æ€æè¿°** (`PurchaseOrderServiceImpl.java`)
```java
private void setStatusDesc(PurchaseOrderVO vo) {
    switch (vo.getStatus()) {
        case 0:
            vo.setStatusDesc("å¾…å®¡æ ¸");
            break;
        case 1:
            vo.setStatusDesc("å¾…å…¥åº“");  // ä¿®æ”¹ï¼šå·²é€šè¿‡ â†’ å¾…å…¥åº“
            break;
        case 2:
            vo.setStatusDesc("å·²æ‹’ç»");
            break;
        case 3:
            vo.setStatusDesc("å·²å…¥åº“");
            break;
        default:
            vo.setStatusDesc("æœªçŸ¥");
    }
}
```

**2. å‰ç«¯çŠ¶æ€æ–‡æœ¬** (`Purchase.vue`)
```javascript
const getStatusText = (status) => {
  const statusMap = {
    0: 'å¾…å®¡æ ¸',
    1: 'å¾…å…¥åº“',  // ä¿®æ”¹ï¼šå·²é€šè¿‡ â†’ å¾…å…¥åº“
    2: 'å·²æ‹’ç»',
    3: 'å·²å…¥åº“'
  }
  return statusMap[status] || 'æœªçŸ¥'
}
```

**3. å‰ç«¯çŠ¶æ€é¢œè‰²** (`Purchase.vue`)
```javascript
const getStatusType = (status) => {
  const typeMap = {
    0: 'warning',  // é»„è‰² - å¾…å®¡æ ¸
    1: 'primary',  // è“è‰² - å¾…å…¥åº“ï¼ˆä¿®æ”¹ï¼šsuccess â†’ primaryï¼‰
    2: 'danger',   // çº¢è‰² - å·²æ‹’ç»
    3: 'success'   // ç»¿è‰² - å·²å…¥åº“
  }
  return typeMap[status] || 'info'
}
```

---

## ğŸ¯ å®Œæ•´ä¸šåŠ¡æµç¨‹

### æµç¨‹è¯´æ˜

#### 1. åˆ›å»ºé‡‡è´­å•
- **æ“ä½œäºº**ï¼šé‡‡è´­å‘˜/ç®¡ç†å‘˜
- **çŠ¶æ€**ï¼šå¾…å®¡æ ¸(0)
- **æ—¶é—´**ï¼š`createTime`ï¼ˆé‡‡è´­æ—¶é—´ï¼‰è‡ªåŠ¨è®°å½•

#### 2. å®¡æ ¸é‡‡è´­å•
- **æ“ä½œäºº**ï¼šä»…ç®¡ç†å‘˜ï¼ˆadminï¼‰
- **æ“ä½œ**ï¼š
  - âœ… é€šè¿‡ â†’ çŠ¶æ€å˜ä¸º"å¾…å…¥åº“(1)"ï¼Œè®°å½•`auditTime`
  - âŒ æ‹’ç» â†’ çŠ¶æ€å˜ä¸º"å·²æ‹’ç»(2)"ï¼Œè®°å½•`auditTime`

#### 3. ç¡®è®¤å…¥åº“
- **æ“ä½œäºº**ï¼šæ‰€æœ‰äººï¼ˆä»…å¯¹"å¾…å…¥åº“"çŠ¶æ€çš„è®¢å•ï¼‰
- **çŠ¶æ€**ï¼šå¾…å…¥åº“(1) â†’ å·²å…¥åº“(3)
- **æ—¶é—´**ï¼šè®°å½•`inboundTime`ï¼ˆå…¥åº“æ—¶é—´ï¼‰
- **æ“ä½œ**ï¼šæ›´æ–°å•†å“åº“å­˜

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶
1. âœ… `PurchaseOrder.java` - ç§»é™¤purchaseDateï¼Œæ·»åŠ inboundTime
2. âœ… `PurchaseOrderServiceImpl.java` - ä¿®æ”¹çŠ¶æ€æè¿°ï¼Œæ·»åŠ å…¥åº“æ—¶é—´è®¾ç½®

### å‰ç«¯æ–‡ä»¶
1. âœ… `Purchase.vue` - ä¿®æ”¹æ—¶é—´å­—æ®µæ˜¾ç¤ºï¼Œå®ç°çœŸå®æƒé™æ§åˆ¶ï¼Œæ›´æ–°çŠ¶æ€æ–‡æœ¬

### æ•°æ®åº“è„šæœ¬
1. âœ… `sql/update-purchase-fields.sql` - ç§»é™¤purchase_dateï¼Œæ·»åŠ inbound_time

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. æ‰§è¡ŒSQLè„šæœ¬
```bash
mysql -u root -p supermarket < sql/update-purchase-fields.sql
```

æˆ–è€…åœ¨MySQLå®¢æˆ·ç«¯ä¸­æ‰§è¡Œï¼š
```sql
-- ç§»é™¤purchase_dateå­—æ®µ
ALTER TABLE `purchase_order` DROP COLUMN IF EXISTS `purchase_date`;

-- æ·»åŠ inbound_timeå­—æ®µ
ALTER TABLE `purchase_order` 
ADD COLUMN `inbound_time` DATETIME DEFAULT NULL COMMENT 'å…¥åº“æ—¶é—´' 
AFTER `audit_remark`;
```

### 2. é‡å¯åç«¯æœåŠ¡
```bash
cd d:\code\supermarket-system\supermarket-backend
mvn spring-boot:run
```

### 3. åˆ·æ–°å‰ç«¯é¡µé¢
æŒ‰ `Ctrl + F5` å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨

---

## âœ… æµ‹è¯•éªŒè¯

### æµ‹è¯•1ï¼šæ—¶é—´å­—æ®µæ˜¾ç¤º
```
1. åˆ›å»ºæ–°é‡‡è´­å•
2. æŸ¥çœ‹åˆ—è¡¨ï¼Œç¡®è®¤"é‡‡è´­æ—¶é—´"åˆ—æ˜¾ç¤ºåˆ›å»ºæ—¶é—´
3. ç¡®è®¤"å…¥åº“æ—¶é—´"åˆ—ä¸ºç©ºï¼ˆå¾…å…¥åº“ï¼‰
4. å®¡æ ¸é€šè¿‡åç¡®è®¤å…¥åº“
5. ç¡®è®¤"å…¥åº“æ—¶é—´"åˆ—æ˜¾ç¤ºå…¥åº“æ—¶é—´
```

### æµ‹è¯•2ï¼šæƒé™æ§åˆ¶
```
1. ä½¿ç”¨adminè´¦å·ç™»å½•
   - åˆ›å»ºé‡‡è´­å•ï¼ˆçŠ¶æ€ï¼šå¾…å®¡æ ¸ï¼‰
   - ç¡®è®¤æ˜¾ç¤º"å®¡æ ¸"æŒ‰é’® âœ…
   
2. ä½¿ç”¨purchaserè´¦å·ç™»å½•
   - æŸ¥çœ‹é‡‡è´­å•åˆ—è¡¨
   - ç¡®è®¤"å¾…å®¡æ ¸"çŠ¶æ€çš„è®¢å•æ²¡æœ‰"å®¡æ ¸"æŒ‰é’® âŒ
   - ç¡®è®¤"å¾…å…¥åº“"çŠ¶æ€çš„è®¢å•æ˜¾ç¤º"ç¡®è®¤å…¥åº“"æŒ‰é’® âœ…
```

### æµ‹è¯•3ï¼šçŠ¶æ€æµè½¬
```
1. åˆ›å»ºé‡‡è´­å•
   - ç¡®è®¤çŠ¶æ€ï¼šå¾…å®¡æ ¸ï¼ˆé»„è‰²æ ‡ç­¾ï¼‰
   
2. ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡
   - ç¡®è®¤çŠ¶æ€ï¼šå¾…å…¥åº“ï¼ˆè“è‰²æ ‡ç­¾ï¼‰
   - ç¡®è®¤æ˜¾ç¤º"ç¡®è®¤å…¥åº“"æŒ‰é’®
   
3. ç¡®è®¤å…¥åº“
   - ç¡®è®¤çŠ¶æ€ï¼šå·²å…¥åº“ï¼ˆç»¿è‰²æ ‡ç­¾ï¼‰
   - ç¡®è®¤å…¥åº“æ—¶é—´å·²è®°å½•
   - ç¡®è®¤åº“å­˜å·²æ›´æ–°
```

---

## ğŸ“Š çŠ¶æ€å¯¹ç…§è¡¨

| çŠ¶æ€ç  | çŠ¶æ€åç§° | æ ‡ç­¾é¢œè‰² | å¯è§æŒ‰é’® | æ“ä½œæƒé™ |
|-------|---------|---------|---------|---------|
| 0 | å¾…å®¡æ ¸ | é»„è‰²(warning) | å®¡æ ¸ | ä»…ç®¡ç†å‘˜ |
| 1 | å¾…å…¥åº“ | è“è‰²(primary) | ç¡®è®¤å…¥åº“ | æ‰€æœ‰äºº |
| 2 | å·²æ‹’ç» | çº¢è‰²(danger) | - | - |
| 3 | å·²å…¥åº“ | ç»¿è‰²(success) | - | - |

---

## ğŸ• æ—¶é—´å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | è®¾ç½®æ—¶æœº |
|-------|------|------|---------|
| `createTime` | DATETIME | é‡‡è´­æ—¶é—´ | åˆ›å»ºè®¢å•æ—¶è‡ªåŠ¨å¡«å…… |
| `auditTime` | DATETIME | å®¡æ ¸æ—¶é—´ | ç®¡ç†å‘˜å®¡æ ¸æ—¶è®¾ç½® |
| `inboundTime` | DATETIME | å…¥åº“æ—¶é—´ | ç¡®è®¤å…¥åº“æ—¶è®¾ç½® |
| `updateTime` | DATETIME | æ›´æ–°æ—¶é—´ | æ¯æ¬¡æ›´æ–°æ—¶è‡ªåŠ¨å¡«å…… |

---

## ğŸ¨ ç•Œé¢æ•ˆæœ

### é‡‡è´­å•åˆ—è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é‡‡è´­å•å·      â”‚ ä¾›åº”å•† â”‚ æ€»é‡‘é¢ â”‚ çŠ¶æ€   â”‚ é‡‡è´­æ—¶é—´          â”‚ å…¥åº“æ—¶é—´          â”‚ æ“ä½œ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PO20251117... â”‚ å¯å£å¯ä¹â”‚ Â¥150  â”‚ å¾…å®¡æ ¸ â”‚ 2025-11-17 10:00 â”‚ -                â”‚ è¯¦æƒ… å®¡æ ¸   â”‚
â”‚ PO20251117... â”‚ ç™¾äº‹å¯ä¹â”‚ Â¥200  â”‚ å¾…å…¥åº“ â”‚ 2025-11-17 09:00 â”‚ -                â”‚ è¯¦æƒ… ç¡®è®¤å…¥åº“â”‚
â”‚ PO20251116... â”‚ é›ªç¢§    â”‚ Â¥180  â”‚ å·²å…¥åº“ â”‚ 2025-11-16 14:00 â”‚ 2025-11-16 15:30 â”‚ è¯¦æƒ…        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æƒé™è§†å›¾å¯¹æ¯”

**ç®¡ç†å‘˜è§†å›¾ï¼ˆadminï¼‰**ï¼š
```
å¾…å®¡æ ¸è®¢å•ï¼š[è¯¦æƒ…] [å®¡æ ¸] [åˆ é™¤]
å¾…å…¥åº“è®¢å•ï¼š[è¯¦æƒ…] [ç¡®è®¤å…¥åº“] [åˆ é™¤]
å·²å…¥åº“è®¢å•ï¼š[è¯¦æƒ…] [åˆ é™¤]
```

**é‡‡è´­å‘˜è§†å›¾ï¼ˆpurchaserï¼‰**ï¼š
```
å¾…å®¡æ ¸è®¢å•ï¼š[è¯¦æƒ…] [åˆ é™¤]  â† æ²¡æœ‰å®¡æ ¸æŒ‰é’®
å¾…å…¥åº“è®¢å•ï¼š[è¯¦æƒ…] [ç¡®è®¤å…¥åº“] [åˆ é™¤]
å·²å…¥åº“è®¢å•ï¼š[è¯¦æƒ…] [åˆ é™¤]
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åº“å­—æ®µå˜æ›´
- âš ï¸ å¿…é¡»å…ˆæ‰§è¡ŒSQLè„šæœ¬
- âš ï¸ æ—§çš„`purchase_date`å­—æ®µä¼šè¢«åˆ é™¤
- âš ï¸ å»ºè®®å…ˆå¤‡ä»½æ•°æ®åº“

### 2. æƒé™åˆ¤æ–­é€»è¾‘
å½“å‰é€šè¿‡`username === 'admin'`åˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜ï¼Œåç»­å¯ä»¥ä¼˜åŒ–ä¸ºï¼š
```javascript
// æ–¹æ¡ˆ1ï¼šé€šè¿‡è§’è‰²å­—æ®µåˆ¤æ–­
const isAdmin = computed(() => {
  return userStore.userInfo?.role === 'admin'
})

// æ–¹æ¡ˆ2ï¼šé€šè¿‡æƒé™åˆ—è¡¨åˆ¤æ–­
const isAdmin = computed(() => {
  return userStore.userInfo?.permissions?.includes('purchase:audit')
})
```

### 3. çŠ¶æ€æµè½¬é™åˆ¶
- åªæœ‰"å¾…å®¡æ ¸(0)"çŠ¶æ€çš„è®¢å•å¯ä»¥å®¡æ ¸
- åªæœ‰"å¾…å…¥åº“(1)"çŠ¶æ€çš„è®¢å•å¯ä»¥å…¥åº“
- "å·²å…¥åº“(3)"çŠ¶æ€çš„è®¢å•ä¸èƒ½åˆ é™¤

---

## ğŸ”„ ä¸ä¹‹å‰ç‰ˆæœ¬çš„å·®å¼‚

### å­—æ®µå˜æ›´
| æ—§å­—æ®µ | æ–°å­—æ®µ | è¯´æ˜ |
|-------|-------|------|
| `purchaseDate` (DATE) | âŒ å·²ç§»é™¤ | æ”¹ç”¨createTime |
| - | `inboundTime` (DATETIME) | âœ… æ–°å¢ |
| `createTime` | `createTime` | å«ä¹‰å˜æ›´ï¼šåˆ›å»ºæ—¶é—´ â†’ é‡‡è´­æ—¶é—´ |

### çŠ¶æ€æ–‡æœ¬å˜æ›´
| çŠ¶æ€ç  | æ—§æ–‡æœ¬ | æ–°æ–‡æœ¬ |
|-------|-------|-------|
| 1 | å·²é€šè¿‡ | å¾…å…¥åº“ |

### æƒé™æ§åˆ¶å˜æ›´
| åŠŸèƒ½ | æ—§é€»è¾‘ | æ–°é€»è¾‘ |
|-----|-------|-------|
| å®¡æ ¸æŒ‰é’® | æ‰€æœ‰äººå¯è§ | ä»…adminå¯è§ |

---

**æœ€åæ›´æ–°**: 2025-11-17 17:02  
**ç‰ˆæœ¬**: v2.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶ç¼–è¯‘é€šè¿‡

**é‡è¦æé†’**ï¼š
1. âš ï¸ å¿…é¡»å…ˆæ‰§è¡ŒSQLè„šæœ¬æ·»åŠ `inbound_time`å­—æ®µå¹¶åˆ é™¤`purchase_date`å­—æ®µ
2. âš ï¸ å¿…é¡»é‡å¯åç«¯æœåŠ¡
3. âš ï¸ å»ºè®®æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åæµ‹è¯•
