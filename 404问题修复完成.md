# 404 é—®é¢˜ä¿®å¤å®Œæˆ âœ…

## ğŸ” é—®é¢˜åŸå› 

### è·¯å¾„é…ç½®å†²çª

**é”™è¯¯é…ç½®**ï¼š
```yaml
# application.yml
server:
  servlet:
    context-path: /api  # å…¨å±€è·¯å¾„å‰ç¼€
```

```java
// Controller
@RequestMapping("/api/auth")  // âŒ åˆåŠ äº†ä¸€å±‚ /api
```

**å®é™…å®Œæ•´è·¯å¾„**ï¼š
```
/api (context-path) + /api/auth (Controller) + /login = /api/api/auth/login âŒ
```

**å‰ç«¯è¯·æ±‚è·¯å¾„**ï¼š
```
/api/auth/login âœ…
```

**è·¯å¾„ä¸åŒ¹é… â†’ 404 Not Found**

---

## âœ… å·²ä¿®å¤å†…å®¹

### ä¿®æ”¹äº†æ‰€æœ‰ Controller çš„ @RequestMapping è·¯å¾„

å»æ‰äº†é‡å¤çš„ `/api` å‰ç¼€ï¼š

| Controller | ä¿®æ”¹å‰ | ä¿®æ”¹å |
|------------|--------|--------|
| AuthController | `/api/auth` | `/auth` âœ… |
| CategoryController | `/api/categories` | `/categories` âœ… |
| ProductController | `/api/products` | `/products` âœ… |
| SupplierController | `/api/suppliers` | `/suppliers` âœ… |
| PurchaseOrderController | `/api/purchase/orders` | `/purchase/orders` âœ… |
| SaleOrderController | `/api/sale/orders` | `/sale/orders` âœ… |
| InventoryController | `/api/inventory` | `/inventory` âœ… |
| StatisticsController | `/api/statistics` | `/statistics` âœ… |
| SysUserController | `/api/users` | `/users` âœ… |
| SysRoleController | `/api/roles` | `/roles` âœ… |

---

## ğŸ¯ ç°åœ¨çš„è·¯å¾„è§„åˆ™

### å®Œæ•´è·¯å¾„ç»„æˆ

```
context-path + Controllerè·¯å¾„ + Methodè·¯å¾„
```

### ç¤ºä¾‹

**ç™»å½•æ¥å£**ï¼š
```
/api (context-path)
+ /auth (@RequestMapping)
+ /login (@PostMapping)
= /api/auth/login âœ…
```

**å•†å“åˆ—è¡¨æ¥å£**ï¼š
```
/api (context-path)
+ /products (@RequestMapping)
+ /list (@GetMapping)
= /api/products/list âœ…
```

---

## ğŸš€ ç«‹å³æ‰§è¡Œ

### âš ï¸ é‡å¯åç«¯ï¼ˆå¿…é¡»ï¼ï¼‰

**åœ¨ IDEA ä¸­**ï¼š
1. åœæ­¢åç«¯ï¼ˆçº¢è‰²æ–¹å—æŒ‰é’®ï¼‰
2. é‡æ–°è¿è¡Œ `SupermarketApplication.java`

**æˆ–å‘½ä»¤è¡Œ**ï¼š
```bash
cd supermarket-backend
# Ctrl+C åœæ­¢
mvn spring-boot:run
```

### ç­‰å¾…å¯åŠ¨å®Œæˆ

çœ‹åˆ°è¿™ä¸ªæ—¥å¿—ï¼š
```
Started SupermarketApplication in X.XXX seconds
Tomcat started on port(s): 8080 (http) with context path '/api'
```

---

## âœ… éªŒè¯ä¿®å¤

### 1. è®¿é—® Swagger æ–‡æ¡£

æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:8080/api/doc.html

åº”è¯¥èƒ½çœ‹åˆ°æ‰€æœ‰æ¥å£ï¼Œè·¯å¾„éƒ½æ˜¯ï¼š
- `/api/auth/login`
- `/api/categories/list`
- `/api/products/list`
- ç­‰ç­‰...

### 2. æµ‹è¯•ç™»å½•

è®¿é—®å‰ç«¯ï¼šhttp://localhost:3000

è¾“å…¥ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`123456`

### 3. æ£€æŸ¥ Network

æŒ‰ F12 â†’ Network æ ‡ç­¾ï¼š

**åº”è¯¥çœ‹åˆ°**ï¼š
```
Request URL: http://localhost:3000/api/auth/login
æˆ–
Request URL: http://localhost:8080/api/auth/login

Status Code: 200 OK âœ…

Response:
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "token": "eyJhbGc...",
    "userId": 1,
    "username": "admin",
    "realName": "ç®¡ç†å‘˜",
    "roleCode": "ADMIN",
    "roleName": "ç®¡ç†å‘˜"
  }
}
```

---

## ğŸ‰ æˆåŠŸæ ‡å¿—

ç™»å½•æˆåŠŸåï¼š
- âœ… è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ `/dashboard`
- âœ… é¡¶éƒ¨æ˜¾ç¤º"ç®¡ç†å‘˜"
- âœ… å·¦ä¾§èœå•æ æ­£å¸¸æ˜¾ç¤º
- âœ… èƒ½çœ‹åˆ°ç»Ÿè®¡æ•°æ®å’Œå›¾è¡¨
- âœ… LocalStorage ä¸­æœ‰ token å’Œ userInfo

---

## ğŸ“š æŠ€æœ¯è¯´æ˜

### context-path çš„ä½œç”¨

`server.servlet.context-path: /api` è¡¨ç¤ºæ‰€æœ‰æ¥å£éƒ½åŠ ä¸Š `/api` å‰ç¼€ã€‚

**å¥½å¤„**ï¼š
- ç»Ÿä¸€ç®¡ç† API è·¯å¾„
- æ–¹ä¾¿åå‘ä»£ç†é…ç½®ï¼ˆNginxï¼‰
- åŒºåˆ†å‰åç«¯è·¯å¾„

**æ³¨æ„**ï¼š
- Controller ä¸­çš„ `@RequestMapping` **ä¸è¦**å†åŠ  `/api`
- å‰ç«¯è¯·æ±‚æ—¶è·¯å¾„è¦åŒ…å« `/api`

### æ­£ç¡®çš„è·¯å¾„é…ç½®æ–¹å¼

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ context-pathï¼ˆå½“å‰ä½¿ç”¨ï¼‰** â­
```yaml
# application.yml
server:
  servlet:
    context-path: /api
```

```java
// Controller
@RequestMapping("/auth")  // ä¸åŠ  /api
```

**æ–¹å¼äºŒï¼šä¸ä½¿ç”¨ context-path**
```yaml
# application.yml
server:
  servlet:
    context-path: /  # æˆ–ä¸è®¾ç½®
```

```java
// Controller
@RequestMapping("/api/auth")  // æ‰‹åŠ¨åŠ  /api
```

**æ¨èä½¿ç”¨æ–¹å¼ä¸€**ï¼Œæ›´çµæ´»ã€‚

---

## ğŸ”§ å¦‚æœè¿˜æ˜¯ 404

### 1. ç¡®è®¤åç«¯å·²é‡å¯

æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰æ–°çš„å¯åŠ¨æ—¥å¿—ã€‚

### 2. æ£€æŸ¥ç«¯å£

- åç«¯ï¼šhttp://localhost:8080/api/doc.html
- å‰ç«¯ï¼šhttp://localhost:3000

### 3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

Ctrl+Shift+Delete â†’ æ¸…é™¤ç¼“å­˜

### 4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

åœ¨åç«¯æ§åˆ¶å°åº”è¯¥èƒ½çœ‹åˆ°è¯·æ±‚æ—¥å¿—ï¼š
```
GET /api/auth/login
POST /api/auth/login
```

### 5. ä½¿ç”¨ Postman æµ‹è¯•

ç›´æ¥æµ‹è¯•åç«¯æ¥å£ï¼š
```
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "123456"
}
```

---

## ğŸ“‹ å®Œæ•´çš„è·¯å¾„å¯¹ç…§è¡¨

| åŠŸèƒ½ | å‰ç«¯è¯·æ±‚è·¯å¾„ | åç«¯ Controller | å®Œæ•´è·¯å¾„ |
|------|-------------|----------------|----------|
| ç™»å½• | `/auth/login` | `@RequestMapping("/auth")` | `/api/auth/login` |
| ç™»å‡º | `/auth/logout` | `@RequestMapping("/auth")` | `/api/auth/logout` |
| åˆ†ç±»åˆ—è¡¨ | `/categories/list` | `@RequestMapping("/categories")` | `/api/categories/list` |
| å•†å“åˆ—è¡¨ | `/products/list` | `@RequestMapping("/products")` | `/api/products/list` |
| ä¾›åº”å•†åˆ—è¡¨ | `/suppliers/list` | `@RequestMapping("/suppliers")` | `/api/suppliers/list` |
| é‡‡è´­è®¢å• | `/purchase/orders/list` | `@RequestMapping("/purchase/orders")` | `/api/purchase/orders/list` |
| é”€å”®è®¢å• | `/sale/orders/list` | `@RequestMapping("/sale/orders")` | `/api/sale/orders/list` |
| åº“å­˜æŸ¥è¯¢ | `/inventory/list` | `@RequestMapping("/inventory")` | `/api/inventory/list` |
| ç»Ÿè®¡æ•°æ® | `/statistics/dashboard` | `@RequestMapping("/statistics")` | `/api/statistics/dashboard` |
| ç”¨æˆ·åˆ—è¡¨ | `/users/list` | `@RequestMapping("/users")` | `/api/users/list` |

---

## ğŸ¯ å‰ç«¯ä»£ç†é…ç½®

`vite.config.js` ä¸­çš„ä»£ç†é…ç½®ï¼š
```javascript
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',  // ä»£ç†åˆ°åç«¯
      changeOrigin: true
    }
  }
}
```

**å·¥ä½œåŸç†**ï¼š
- å‰ç«¯è¯·æ±‚ï¼š`/api/auth/login`
- Vite ä»£ç†åˆ°ï¼š`http://localhost:8080/api/auth/login`
- åç«¯æ¥æ”¶åˆ°ï¼š`/api/auth/login`
- åŒ¹é…åˆ°ï¼šcontext-path(`/api`) + Controller(`/auth`) + Method(`/login`)

---

## âœ¨ æ€»ç»“

**é—®é¢˜**ï¼šController è·¯å¾„é‡å¤æ·»åŠ äº† `/api` å‰ç¼€

**è§£å†³**ï¼š
1. åˆ é™¤æ‰€æœ‰ Controller ä¸­çš„ `/api` å‰ç¼€
2. ä¿ç•™ `application.yml` ä¸­çš„ `context-path: /api`
3. é‡å¯åç«¯

**ç»“æœ**ï¼š
- `/api/auth/login` âœ…
- `/api/categories/list` âœ…
- `/api/products/list` âœ…
- æ‰€æœ‰è·¯å¾„æ­£å¸¸ï¼

---

**ç°åœ¨é‡å¯åç«¯ï¼Œåº”è¯¥å°±èƒ½æˆåŠŸç™»å½•äº†ï¼** ğŸ‰

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. åç«¯å¯åŠ¨æ—¥å¿—
2. Swagger æ–‡æ¡£æˆªå›¾ï¼ˆhttp://localhost:8080/api/doc.htmlï¼‰
3. æµè§ˆå™¨ Network çš„è¯¦ç»†ä¿¡æ¯


