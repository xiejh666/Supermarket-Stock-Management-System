# 商品管理功能测试指南

## 🎯 测试目标

验证以下两个新功能是否正常工作：
1. ✅ 商品查看功能
2. ✅ 分类列表实时刷新

---

## 📋 测试前准备

### 1. 启动服务

**后端服务**：
```bash
cd d:\code\supermarket-system\supermarket-backend
mvn spring-boot:run
```

**前端服务**：
```bash
cd d:\code\supermarket-system\supermarket-frontend
npm run dev
```

### 2. 登录系统
- 访问：http://8.136.43.180:5173
- 使用管理员账号登录

---

## 🧪 测试用例

### 测试用例1：查看商品详情

#### 测试步骤
1. 点击左侧菜单"商品管理" → "商品管理"
2. 在商品列表中找到任意一个商品
3. 点击该商品操作列的"查看"按钮

#### 预期结果
✅ **应该看到**：
- 弹出"商品详情"对话框
- 对话框宽度适中（700px）
- 使用描述列表（Descriptions）展示信息

✅ **信息完整性**：
- 商品编码：显示商品编码
- 商品名称：显示商品名称
- 商品分类：显示分类名称（不是ID）
- 规格：显示规格或"-"
- 单位：显示单位或"-"
- 成本价：显示"¥2.50"格式
- 零售价：显示"¥3.50"格式（蓝色）
- 库存：显示数字，带颜色标签
  - 充足时：绿色标签
  - 不足时：红色标签
- 预警库存：显示数字
- 状态：显示"上架"或"下架"，带颜色标签
- 商品图片：显示图片或"-"
- 商品描述：显示描述或"-"
- 创建时间：格式"2025-11-17 10:30:00"
- 更新时间：格式"2025-11-17 14:20:00"

✅ **交互功能**：
- 点击商品图片 → 图片放大预览
- 点击"编辑"按钮 → 关闭查看对话框，打开编辑对话框
- 点击"关闭"按钮 → 关闭对话框

#### 测试截图位置
请在此处截图保存测试结果：
```
[ ] 查看对话框整体界面
[ ] 库存充足时的显示（绿色标签）
[ ] 库存不足时的显示（红色标签）
[ ] 图片预览功能
```

---

### 测试用例2：分类列表实时刷新

#### 测试步骤

**第一步：添加新分类**
1. 点击左侧菜单"商品管理" → "分类管理"
2. 点击"新增分类"按钮
3. 填写分类信息：
   - 分类名称：`测试零食`
   - 分类描述：`用于测试的零食分类`
4. 点击"确定"按钮
5. 确认分类添加成功

**第二步：验证商品新增时能看到新分类**
1. 点击左侧菜单"商品管理" → "商品管理"
2. 点击"新增商品"按钮
3. 点击"商品分类"下拉框

#### 预期结果

✅ **应该看到**：
- 下拉框中包含刚刚添加的"测试零食"分类
- 分类列表是最新的，包含所有已添加的分类
- 可以正常选择"测试零食"分类

✅ **完整测试**：
1. 选择"测试零食"分类
2. 填写其他必填信息：
   - 商品名称：`测试薯片`
   - 商品编码：`TEST001`
   - 规格：`100g`
   - 单位：`袋`
   - 成本价：`3.00`
   - 零售价：`5.00`
   - 预警库存：`20`
3. 点击"确定"
4. 确认商品创建成功

**第三步：验证编辑时也能看到新分类**
1. 在商品列表中找到任意商品
2. 点击"编辑"按钮
3. 点击"商品分类"下拉框

#### 预期结果
✅ **应该看到**：
- 下拉框中包含"测试零食"分类
- 可以将商品的分类改为"测试零食"

#### 测试截图位置
请在此处截图保存测试结果：
```
[ ] 新增分类成功界面
[ ] 新增商品时的分类下拉框（包含新分类）
[ ] 编辑商品时的分类下拉框（包含新分类）
[ ] 使用新分类创建的商品
```

---

### 测试用例3：综合测试

#### 测试场景
模拟真实使用场景，测试功能的连贯性。

#### 测试步骤
1. 添加新分类"进口零食"
2. 使用该分类创建商品"进口巧克力"
3. 查看该商品的详情
4. 在查看对话框中点击"编辑"
5. 修改商品信息
6. 保存后再次查看详情

#### 预期结果
✅ **应该看到**：
- 整个流程顺畅，无卡顿
- 分类信息正确显示
- 查看详情信息准确
- 编辑功能正常
- 数据保存成功

---

## 🐛 常见问题排查

### 问题1：查看按钮点击后没有反应

**可能原因**：
- 前端代码未更新
- 浏览器缓存

**解决方法**：
1. 确认前端代码已保存
2. 按`Ctrl + F5`强制刷新浏览器
3. 清除浏览器缓存

### 问题2：分类下拉框中看不到新添加的分类

**可能原因**：
- 后端接口问题
- 前端API调用错误

**解决方法**：
1. 打开浏览器开发者工具（F12）
2. 切换到"Network"标签
3. 点击"新增商品"按钮
4. 查看是否有`/categories/all`的请求
5. 检查请求返回的数据是否包含新分类

**调试命令**：
```javascript
// 在浏览器控制台执行
console.log('分类列表:', categories.value)
```

### 问题3：查看详情时分类名称显示为"-"

**可能原因**：
- 分类列表未加载
- 分类ID不匹配

**解决方法**：
1. 检查`categories.value`是否有数据
2. 检查商品的`categoryId`是否正确
3. 确认`getCategoryName`函数逻辑正确

---

## ✅ 测试检查清单

### 功能测试
- [ ] 查看商品详情对话框能正常打开
- [ ] 所有字段都正确显示
- [ ] 价格格式正确（¥符号）
- [ ] 库存标签颜色正确
- [ ] 状态标签颜色正确
- [ ] 时间格式化正确
- [ ] 图片预览功能正常
- [ ] 从查看跳转到编辑功能正常
- [ ] 新增商品时分类下拉框包含最新分类
- [ ] 编辑商品时分类下拉框包含最新分类

### 性能测试
- [ ] 查看详情响应速度快（<500ms）
- [ ] 分类列表加载速度快（<1s）
- [ ] 对话框打开/关闭流畅无卡顿

### 兼容性测试
- [ ] Chrome浏览器正常
- [ ] Edge浏览器正常
- [ ] Firefox浏览器正常

### 边界测试
- [ ] 商品没有图片时显示"-"
- [ ] 商品没有描述时显示"-"
- [ ] 商品没有规格时显示"-"
- [ ] 分类列表为空时不报错

---

## 📊 测试报告模板

### 测试环境
- 操作系统：Windows 11
- 浏览器：Chrome 120.0
- 前端版本：v1.0
- 后端版本：v1.0
- 测试日期：2025-11-17

### 测试结果

| 测试用例 | 测试结果 | 备注 |
|---------|---------|------|
| 查看商品详情 | ✅ 通过 | 所有信息正确显示 |
| 分类实时刷新（新增） | ✅ 通过 | 新分类立即可用 |
| 分类实时刷新（编辑） | ✅ 通过 | 编辑时也能看到新分类 |
| 图片预览功能 | ✅ 通过 | 点击图片正常放大 |
| 快速编辑功能 | ✅ 通过 | 从查看跳转到编辑正常 |

### 发现的问题
无

### 测试结论
✅ **所有功能测试通过，可以正式使用。**

---

## 🎓 测试技巧

### 1. 使用浏览器开发者工具
```
F12 → Console
查看日志输出和错误信息

F12 → Network
查看API请求和响应

F12 → Vue DevTools
查看Vue组件状态
```

### 2. 快速测试数据
```javascript
// 测试分类
{
  categoryName: "测试零食",
  description: "用于测试"
}

// 测试商品
{
  productName: "测试薯片",
  productCode: "TEST001",
  categoryId: 选择刚创建的分类,
  specification: "100g",
  unit: "袋",
  costPrice: 3.00,
  retailPrice: 5.00,
  warningStock: 20
}
```

### 3. 验证数据库
```sql
-- 查看分类
SELECT * FROM category ORDER BY create_time DESC LIMIT 5;

-- 查看商品
SELECT * FROM product ORDER BY create_time DESC LIMIT 5;

-- 查看商品和分类关联
SELECT p.product_name, c.category_name 
FROM product p 
LEFT JOIN category c ON p.category_id = c.id 
ORDER BY p.create_time DESC 
LIMIT 5;
```

---

**测试完成后请填写测试报告并保存截图！**

**祝测试顺利！** 🎉
