# å‰ç«¯å¯åŠ¨é—®é¢˜è§£å†³æ–¹æ¡ˆ ğŸ”§

## ğŸ”´ é”™è¯¯ä¿¡æ¯

```
The CJS build of Vite's Node API is deprecated.
TypeError: crypto$2.getRandomValues is not a function
```

---

## âœ… è§£å†³æ–¹æ¡ˆï¼ˆæ¨èæŒ‰é¡ºåºå°è¯•ï¼‰

### æ–¹æ¡ˆä¸€ï¼šä¸€é”®ä¿®å¤è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰â­

**ç›´æ¥åŒå‡»è¿è¡Œ**ï¼š
```
supermarket-frontend/ä¿®å¤å¯åŠ¨é—®é¢˜.bat
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åˆ é™¤æ—§çš„ `node_modules` å’Œ `package-lock.json`
2. æ¸…ç† npm ç¼“å­˜
3. é‡æ–°å®‰è£…ä¾èµ–ï¼ˆå·²å‡çº§åˆ°æœ€æ–° Viteï¼‰
4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

---

### æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨ä¿®å¤

#### Step 1ï¼šæ£€æŸ¥ Node.js ç‰ˆæœ¬

```bash
node -v
```

**è¦æ±‚**ï¼šNode.js 18+ æˆ– 20+ (LTS)

å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œè¯·ä¸‹è½½æœ€æ–°ç‰ˆï¼š
- å®˜ç½‘ï¼šhttps://nodejs.org/
- æ¨èï¼šLTS ç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰

---

#### Step 2ï¼šè¿›å…¥å‰ç«¯ç›®å½•

```bash
cd D:\code\supermarket-system\supermarket-frontend
```

---

#### Step 3ï¼šåˆ é™¤æ—§æ–‡ä»¶

```bash
# åˆ é™¤ node_modules
rmdir /s /q node_modules

# åˆ é™¤ package-lock.json
del package-lock.json
```

---

#### Step 4ï¼šæ¸…ç†ç¼“å­˜

```bash
npm cache clean --force
```

---

#### Step 5ï¼šé‡æ–°å®‰è£…ä¾èµ–

```bash
npm install
```

å¦‚æœé€Ÿåº¦æ…¢ï¼Œä½¿ç”¨å›½å†…é•œåƒï¼š
```bash
npm config set registry https://registry.npmmirror.com
npm install
```

---

#### Step 6ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

---

### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨æ—§ç‰ˆæœ¬ Viteï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

å¦‚æœæ–¹æ¡ˆä¸€ã€äºŒéƒ½ä¸è¡Œï¼Œé™çº§åˆ° Vite 4.xï¼š

#### 1. ä¿®æ”¹ `package.json`

```json
{
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.5.0",
    "sass": "^1.69.5",
    "vite": "^4.5.0"
  }
}
```

#### 2. åˆ é™¤ä¾èµ–å¹¶é‡æ–°å®‰è£…

```bash
rmdir /s /q node_modules
del package-lock.json
npm install
```

#### 3. å¯åŠ¨

```bash
npm run dev
```

---

### æ–¹æ¡ˆå››ï¼šä¿®æ”¹ç«¯å£ï¼ˆè§£å†³ç«¯å£å†²çªï¼‰

å¦‚æœæç¤ºç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ `vite.config.js`ï¼š

```javascript
export default defineConfig({
  plugins: [vue()],
  server: {
    port: 5174  // æ”¹ä¸ºå…¶ä»–ç«¯å£
  },
  // ... å…¶ä»–é…ç½®
})
```

---

## ğŸ” åŸå› åˆ†æ

### 1. CJS è­¦å‘Š

Vite 5.0 å¼€å§‹å¼ƒç”¨ CommonJS æ„å»ºï¼Œæ¨èä½¿ç”¨ ESMã€‚
- **è§£å†³**ï¼šå‡çº§åˆ° Vite 5.1+ æˆ–ä½¿ç”¨ Vite 4.x

### 2. crypto é”™è¯¯

`crypto$2.getRandomValues is not a function` é€šå¸¸æ˜¯å› ä¸ºï¼š
- Node.js ç‰ˆæœ¬è¿‡ä½ï¼ˆ< 18ï¼‰
- Vite ç‰ˆæœ¬ä¸ Node.js ä¸åŒ¹é…
- ä¾èµ–ç¼“å­˜æŸå

- **è§£å†³**ï¼š
  - å‡çº§ Node.js åˆ° 18+ LTS
  - æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
  - å‡çº§ Vite åˆ°æœ€æ–°ç‰ˆæœ¬

---

## ğŸ“‹ ç‰ˆæœ¬å…¼å®¹æ€§è¡¨

| Vite ç‰ˆæœ¬ | æ¨è Node.js ç‰ˆæœ¬ | çŠ¶æ€ |
|-----------|-------------------|------|
| Vite 5.4+ | 18.x, 20.x (LTS)  | âœ… æ¨è |
| Vite 5.0-5.3 | 18.x, 20.x | âš ï¸ å¯èƒ½æœ‰ CJS è­¦å‘Š |
| Vite 4.x  | 14.x, 16.x, 18.x  | âœ… ç¨³å®š |

---

## âœ¨ å·²ä¿®æ”¹å†…å®¹

æˆ‘å·²ç»ä¸ºä½ åšäº†ä»¥ä¸‹ä¼˜åŒ–ï¼š

### 1. å‡çº§ä¾èµ–ç‰ˆæœ¬ï¼ˆ`package.json`ï¼‰

**ä¿®æ”¹å‰**ï¼š
```json
"devDependencies": {
  "@vitejs/plugin-vue": "^4.5.0",
  "vite": "^5.0.8"
}
```

**ä¿®æ”¹å**ï¼š
```json
"devDependencies": {
  "@vitejs/plugin-vue": "^5.0.0",
  "vite": "^5.4.0"
}
```

### 2. åˆ›å»ºä¿®å¤è„šæœ¬

- âœ… `supermarket-frontend/ä¿®å¤å¯åŠ¨é—®é¢˜.bat`
- âœ… `supermarket-frontend/å¯åŠ¨å¼€å‘æœåŠ¡å™¨.bat`
- âœ… `supermarket-frontend/æ„å»ºç”Ÿäº§ç‰ˆæœ¬.bat`

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èæµç¨‹ï¼‰

### æ–¹æ³• Aï¼šä½¿ç”¨ä¿®å¤è„šæœ¬

1. åŒå‡» `supermarket-frontend/ä¿®å¤å¯åŠ¨é—®é¢˜.bat`
2. ç­‰å¾…å®‰è£…å®Œæˆ
3. æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ http://localhost:3000

### æ–¹æ³• Bï¼šæ‰‹åŠ¨æ‰§è¡Œ

```bash
# 1. è¿›å…¥ç›®å½•
cd D:\code\supermarket-system\supermarket-frontend

# 2. æ¸…ç†æ—§æ–‡ä»¶
rmdir /s /q node_modules
del package-lock.json

# 3. é‡æ–°å®‰è£…
npm install

# 4. å¯åŠ¨
npm run dev
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1ï¼šnpm install å¾ˆæ…¢ï¼Ÿ

**A**ï¼šä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ
```bash
npm config set registry https://registry.npmmirror.com
npm install
```

### Q2ï¼šç«¯å£ 3000 è¢«å ç”¨ï¼Ÿ

**A**ï¼šä¿®æ”¹ `vite.config.js` ä¸­çš„ç«¯å£å·
```javascript
server: {
  port: 5174  // æ”¹ä¸ºå…¶ä»–ç«¯å£
}
```

### Q3ï¼šè¿˜æ˜¯æŠ¥ crypto é”™è¯¯ï¼Ÿ

**A**ï¼šæ£€æŸ¥ Node.js ç‰ˆæœ¬
```bash
node -v
# å¦‚æœä½äº 18.xï¼Œè¯·å‡çº§åˆ°æœ€æ–° LTS ç‰ˆæœ¬
```

ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/

### Q4ï¼šå®‰è£…åè¿˜æ˜¯æŠ¥é”™ï¼Ÿ

**A**ï¼šå®Œå…¨æ¸…ç†åé‡è¯•
```bash
# æ¸…ç†å…¨å±€ç¼“å­˜
npm cache clean --force

# æ¸…ç†æœ¬åœ°
rmdir /s /q node_modules
del package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### Q5ï¼šæƒ³ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼Ÿ

**A**ï¼šä¿®æ”¹ package.json ä¸­çš„ vite ç‰ˆæœ¬ä¸º `^4.5.0`ï¼Œç„¶åé‡æ–°å®‰è£…

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
# 1. Node.js ç‰ˆæœ¬
node -v

# 2. npm ç‰ˆæœ¬
npm -v

# 3. å®Œæ•´é”™è¯¯æ—¥å¿—
npm run dev > error.log 2>&1
```

---

## âœ… æˆåŠŸæ ‡å¿—

å¯åŠ¨æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
  VITE v5.4.0  ready in XXX ms

  âœ  Local:   http://localhost:3000/
  âœ  Network: use --host to expose
  âœ  press h + enter to show help
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ï¼š`http://localhost:3000`

---

## ğŸ“± å·²å®Œæˆçš„é¡µé¢

å‰ç«¯å·²å®Œæˆä»¥ä¸‹é¡µé¢å¼€å‘ï¼š

### âœ… æ ¸å¿ƒåŠŸèƒ½é¡µé¢
1. **ç™»å½•é¡µé¢** (`/login`)
   - ç”¨æˆ·ç™»å½•
   - è¡¨å•éªŒè¯
   - JWT è®¤è¯

2. **é¦–é¡µä»ªè¡¨ç›˜** (`/dashboard`)
   - æ•°æ®ç»Ÿè®¡å¡ç‰‡
   - é”€å”®è¶‹åŠ¿å›¾è¡¨
   - é‡‡è´­è¶‹åŠ¿å›¾è¡¨
   - åº“å­˜é¢„è­¦

3. **å•†å“ç®¡ç†** (`/product`)
   - å•†å“åˆ—è¡¨
   - æ–°å¢/ç¼–è¾‘å•†å“
   - å•†å“æœç´¢

4. **åˆ†ç±»ç®¡ç†** (`/category`)
   - åˆ†ç±»åˆ—è¡¨
   - æ–°å¢/ç¼–è¾‘åˆ†ç±»

5. **ç”¨æˆ·ç®¡ç†** (`/user`)
   - ç”¨æˆ·åˆ—è¡¨
   - æ–°å¢/ç¼–è¾‘ç”¨æˆ·
   - ç”¨æˆ·çŠ¶æ€ç®¡ç†
   - å¯†ç é‡ç½®

6. **ä¾›åº”å•†ç®¡ç†** (`/supplier`)
   - ä¾›åº”å•†åˆ—è¡¨
   - æ–°å¢/ç¼–è¾‘ä¾›åº”å•†

7. **é‡‡è´­ç®¡ç†** (`/purchase`)
   - é‡‡è´­è®¢å•åˆ—è¡¨
   - æ–°å¢é‡‡è´­å•
   - ç¡®è®¤å…¥åº“

8. **é”€å”®ç®¡ç†** (`/sale`)
   - é”€å”®è®¢å•åˆ—è¡¨
   - æ–°å¢é”€å”®å•
   - ç¡®è®¤å‡ºåº“

9. **åº“å­˜ç®¡ç†** (`/inventory`)
   - åº“å­˜æŸ¥è¯¢
   - åº“å­˜ç»Ÿè®¡
   - åº“å­˜è°ƒæ•´
   - åº“å­˜é¢„è­¦

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… ç¡®ä¿åç«¯å·²å¯åŠ¨ï¼ˆhttp://localhost:8080ï¼‰
2. âœ… è®¿é—®å‰ç«¯é¡µé¢ï¼ˆhttp://localhost:3000ï¼‰
3. âœ… ä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼š
   - ç”¨æˆ·åï¼šadmin
   - å¯†ç ï¼š123456

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å‰ç«¯å¯åŠ¨æŒ‡å—.md](å‰ç«¯å¯åŠ¨æŒ‡å—.md) - å®Œæ•´çš„å¯åŠ¨æ–‡æ¡£
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [Node.js ä¸‹è½½](https://nodejs.org/)


