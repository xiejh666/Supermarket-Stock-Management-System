# é…ç½®ä¿®æ”¹è¯´æ˜ - éƒ¨ç½²åˆ°æœåŠ¡å™¨å‰å¿…è¯»

## âœ… å·²ä¿®æ”¹çš„é…ç½®

### 1. åç«¯é…ç½®æ–‡ä»¶

**æ–‡ä»¶**: `supermarket-backend/src/main/resources/application.yml`

#### ä¿®æ”¹å†…å®¹ï¼š

**æ•°æ®åº“è¿æ¥**ï¼ˆç¬¬6-7è¡Œï¼‰ï¼š
```yaml
# ä¿®æ”¹å‰
url: jdbc:mysql://localhost:3306/supermarket_db?...

# ä¿®æ”¹å
url: jdbc:mysql://8.136.43.180:3306/supermarket_db?...
```

**Redisè¿æ¥**ï¼ˆç¬¬16-17è¡Œï¼‰ï¼š
```yaml
# ä¿®æ”¹å‰
host: localhost

# ä¿®æ”¹å
host: 8.136.43.180
```

### 2. å‰ç«¯é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

**æ–‡ä»¶**: `supermarket-frontend/vite.config.js`

è¿™ä¸ªæ–‡ä»¶åªåœ¨**å¼€å‘ç¯å¢ƒ**ä½¿ç”¨ï¼Œæ‰“åŒ…åä¸ä¼šå½±å“ç”Ÿäº§ç¯å¢ƒã€‚ä½†ä¸ºäº†æ–¹ä¾¿æœ¬åœ°å¼€å‘æ—¶è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ï¼š

```javascript
// ä¿®æ”¹å‰
target: 'http://localhost:8080', // æœ¬åœ°åç«¯

// ä¿®æ”¹å
target: 'http://8.136.43.180:8080', // è¿œç¨‹åç«¯
```

## ğŸ“ é…ç½®è¯´æ˜

### åç«¯é…ç½®è¯¦è§£

#### æ•°æ®åº“é…ç½®
```yaml
spring:
  datasource:
    url: jdbc:mysql://8.136.43.180:3306/supermarket_db?...
    username: root
    password: root
```

- **ä½œç”¨**: åç«¯è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šçš„MySQLæ•°æ®åº“
- **é‡è¦æ€§**: â­â­â­â­â­ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
- **è¯´æ˜**: å¦‚æœä¸ä¿®æ”¹ï¼Œåç«¯ä¼šå°è¯•è¿æ¥æœ¬åœ°æ•°æ®åº“ï¼Œéƒ¨ç½²åˆ°æœåŠ¡å™¨åæ— æ³•æ­£å¸¸å·¥ä½œ

#### Redisé…ç½®
```yaml
spring:
  redis:
    host: 8.136.43.180
    port: 6379
    password: ""
```

- **ä½œç”¨**: åç«¯è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šçš„Redisç¼“å­˜
- **é‡è¦æ€§**: â­â­â­â­â­ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
- **è¯´æ˜**: ç”¨äºç¼“å­˜å’Œä¼šè¯ç®¡ç†ï¼Œå¦‚æœä¸ä¿®æ”¹ä¼šå¯¼è‡´åŠŸèƒ½å¼‚å¸¸

### å‰ç«¯é…ç½®è¯¦è§£

#### å¼€å‘ç¯å¢ƒä»£ç†ï¼ˆvite.config.jsï¼‰
```javascript
server: {
  proxy: {
    '/api': {
      target: 'http://8.136.43.180:8080',
      changeOrigin: true
    }
  }
}
```

- **ä½œç”¨**: å¼€å‘ç¯å¢ƒä¸‹å‰ç«¯è¯·æ±‚ä»£ç†åˆ°åç«¯
- **é‡è¦æ€§**: â­â­ï¼ˆå¯é€‰ä¿®æ”¹ï¼‰
- **è¯´æ˜**: 
  - åªåœ¨æœ¬åœ°å¼€å‘æ—¶ä½¿ç”¨ï¼ˆ`npm run dev`ï¼‰
  - æ‰“åŒ…åï¼ˆ`npm run build`ï¼‰ä¸ä¼šç”¨åˆ°è¿™ä¸ªé…ç½®
  - ç”Ÿäº§ç¯å¢ƒé€šè¿‡Nginxé…ç½®ä»£ç†

#### ç”Ÿäº§ç¯å¢ƒAPIè¯·æ±‚ï¼ˆrequest.jsï¼‰
```javascript
const service = axios.create({
  baseURL: '/api',  // ç›¸å¯¹è·¯å¾„
  timeout: 10000
})
```

- **ä½œç”¨**: å‰ç«¯å‘é€APIè¯·æ±‚çš„åŸºç¡€è·¯å¾„
- **é‡è¦æ€§**: â­â­â­â­â­ï¼ˆå·²æ­£ç¡®é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
- **è¯´æ˜**: 
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `/api`
  - ç”±Nginxé…ç½®ä»£ç†åˆ°åç«¯
  - è¿™æ˜¯æœ€ä½³å®è·µï¼Œæ— éœ€ä¿®æ”¹

## ğŸ”„ æœ¬åœ°å¼€å‘ vs ç”Ÿäº§ç¯å¢ƒ

### æœ¬åœ°å¼€å‘é…ç½®

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°å¼€å‘æ—¶è¿æ¥æœ¬åœ°æœåŠ¡ï¼š

**åç«¯ application.yml**:
```yaml
datasource:
  url: jdbc:mysql://localhost:3306/supermarket_db?...
redis:
  host: localhost
```

**å‰ç«¯ vite.config.js**:
```javascript
target: 'http://localhost:8080',
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆå½“å‰é…ç½®ï¼‰

**åç«¯ application.yml**:
```yaml
datasource:
  url: jdbc:mysql://8.136.43.180:3306/supermarket_db?...
redis:
  host: 8.136.43.180
```

**å‰ç«¯**: æ— éœ€ç‰¹æ®Šé…ç½®ï¼ŒNginxä¼šå¤„ç†ä»£ç†

## ğŸš€ éƒ¨ç½²æµç¨‹

### ä¿®æ”¹é…ç½®åçš„éƒ¨ç½²æ­¥éª¤

1. **ç¡®è®¤é…ç½®å·²ä¿®æ”¹**
   - âœ… åç«¯ `application.yml` å·²æ”¹ä¸ºæœåŠ¡å™¨IP
   - âœ… Redisé…ç½®å·²æ”¹ä¸ºæœåŠ¡å™¨IP

2. **æ‰“åŒ…åç«¯**
   ```bash
   cd d:\code\supermarket-system\supermarket-backend
   mvn clean package -DskipTests
   ```

3. **æ‰“åŒ…å‰ç«¯**
   ```bash
   cd d:\code\supermarket-system\supermarket-frontend
   npm run build
   ```

4. **ä¸Šä¼ åˆ°æœåŠ¡å™¨**
   - ä¸Šä¼  `dist` æ–‡ä»¶å¤¹
   - ä¸Šä¼  JAR æ–‡ä»¶
   - ä¸Šä¼  SQL æ–‡ä»¶

5. **æœåŠ¡å™¨æ“ä½œ**
   - å¯¼å…¥æ•°æ®åº“
   - å¯åŠ¨åç«¯æœåŠ¡
   - é‡å¯Nginx

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆå‰ç«¯ä¸éœ€è¦ä¿®æ”¹IPåœ°å€ï¼Ÿ

**A**: å‰ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `/api`ï¼Œç”±Nginxé…ç½®ä»£ç†ï¼š

```nginx
location /api/ {
    proxy_pass http://localhost:8080;
}
```

æµè§ˆå™¨è®¿é—® `http://8.136.43.180/api/xxx` æ—¶ï¼ŒNginxä¼šè‡ªåŠ¨è½¬å‘åˆ°åç«¯ã€‚

### Q2: æœ¬åœ°å¼€å‘æ—¶æ€ä¹ˆåŠï¼Ÿ

**A**: æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š

**æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æœ¬åœ°æœåŠ¡**
- ä¿®æ”¹é…ç½®ä¸º `localhost`
- å¯åŠ¨æœ¬åœ°MySQLã€Redisã€åç«¯
- å‰ç«¯è¿æ¥æœ¬åœ°åç«¯

**æ–¹æ¡ˆäºŒï¼šè¿æ¥è¿œç¨‹æœåŠ¡**
- ä¿æŒå½“å‰é…ç½®ï¼ˆæœåŠ¡å™¨IPï¼‰
- å‰ç«¯ç›´æ¥è¿æ¥è¿œç¨‹åç«¯å¼€å‘
- éœ€è¦ç¡®ä¿æœåŠ¡å™¨ç«¯å£å¼€æ”¾

### Q3: å¦‚ä½•å¿«é€Ÿåˆ‡æ¢é…ç½®ï¼Ÿ

**A**: ä½¿ç”¨æ³¨é‡Šåˆ‡æ¢ï¼š

```yaml
# æœ¬åœ°å¼€å‘
# url: jdbc:mysql://localhost:3306/supermarket_db?...

# ç”Ÿäº§ç¯å¢ƒ
url: jdbc:mysql://8.136.43.180:3306/supermarket_db?...
```

éœ€è¦åˆ‡æ¢æ—¶ï¼Œåªéœ€è¦äº¤æ¢æ³¨é‡Šå³å¯ã€‚

### Q4: æ‰“åŒ…åå‘ç°é…ç½®é”™äº†æ€ä¹ˆåŠï¼Ÿ

**A**: 
1. ä¿®æ”¹ `application.yml`
2. é‡æ–°æ‰“åŒ…åç«¯ï¼š`mvn clean package -DskipTests`
3. é‡æ–°ä¸Šä¼ JARæ–‡ä»¶åˆ°æœåŠ¡å™¨
4. é‡å¯åç«¯æœåŠ¡

å‰ç«¯é…ç½®é”™è¯¯ä¸å½±å“ç”Ÿäº§ç¯å¢ƒï¼Œæ— éœ€é‡æ–°æ‰“åŒ…ã€‚

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰è¯·ç¡®è®¤ï¼š

- [ ] åç«¯æ•°æ®åº“è¿æ¥å·²æ”¹ä¸º `8.136.43.180`
- [ ] åç«¯Redisè¿æ¥å·²æ”¹ä¸º `8.136.43.180`
- [ ] æ•°æ®åº“ç”¨æˆ·åå¯†ç æ­£ç¡®
- [ ] Rediså¯†ç é…ç½®æ­£ç¡®ï¼ˆå¦‚æœæœ‰å¯†ç ï¼‰
- [ ] å‰ç«¯ `baseURL` ä¸ºç›¸å¯¹è·¯å¾„ `/api`
- [ ] æœåŠ¡å™¨MySQLå·²å¯åŠ¨
- [ ] æœåŠ¡å™¨Rediså·²å¯åŠ¨
- [ ] æœåŠ¡å™¨é˜²ç«å¢™å·²å¼€æ”¾å¿…è¦ç«¯å£

## ğŸ” å®‰å…¨å»ºè®®

### 1. æ•°æ®åº“å¯†ç 

ç”Ÿäº§ç¯å¢ƒå»ºè®®ä¿®æ”¹æ•°æ®åº“å¯†ç ï¼š

```yaml
datasource:
  username: root
  password: your_strong_password_here  # ä¿®æ”¹ä¸ºå¼ºå¯†ç 
```

### 2. Rediså¯†ç 

å»ºè®®ä¸ºRedisè®¾ç½®å¯†ç ï¼š

```yaml
redis:
  password: "your_redis_password"  # è®¾ç½®Rediså¯†ç 
```

### 3. JWTå¯†é’¥

JWTå¯†é’¥å·²é…ç½®ï¼Œå»ºè®®å®šæœŸæ›´æ¢ï¼š

```yaml
jwt:
  secret: supermarket-secret-key-for-jwt-token-generation-2024-with-extra-length-to-meet-hs512-requirements
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤æœåŠ¡å™¨IPåœ°å€æ˜¯å¦æ­£ç¡®
3. éªŒè¯æœåŠ¡å™¨ç«¯å£æ˜¯å¦å¼€æ”¾
4. æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—
5. æµ‹è¯•ç½‘ç»œè¿æ¥

---

**é…ç½®ä¿®æ”¹å®Œæˆæ—¶é—´**: 2025-12-10 09:45
**ä¿®æ”¹äºº**: Cascade AI
