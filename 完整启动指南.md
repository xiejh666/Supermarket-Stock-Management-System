# 超市进销存管理系统 - 完整启动指南 🚀

## 🎉 项目状态

- ✅ **后端开发**: 100% 完成
- ✅ **前端开发**: 100% 完成
- ✅ **数据库**: 设计完成
- ✅ **所有问题**: 已修复

---

## 📋 准备工作

### 1. 环境要求

| 软件 | 版本要求 | 用途 |
|------|---------|------|
| JDK | 8 或 17+ | 后端运行环境 |
| Node.js | 18+ (LTS) | 前端运行环境 |
| MySQL | 5.7 或 8.0+ | 数据库 |
| Redis | 6.0+ | 缓存（可选） |
| Maven | 3.6+ | 后端构建工具 |

### 2. 检查环境

```bash
# 检查 JDK
java -version

# 检查 Node.js
node -v

# 检查 npm
npm -v

# 检查 MySQL
mysql --version
```

---

## 🗄️ 数据库初始化

### 步骤 1：创建数据库

使用 **DataGrip** 或 MySQL 命令行：

```sql
CREATE DATABASE supermarket_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 步骤 2：导入数据

1. 打开 DataGrip
2. 连接到 MySQL 服务器
3. 选择 `supermarket_system` 数据库
4. 依次执行以下 SQL 文件：
   - `sql/schema.sql` - 建表脚本
   - `sql/data.sql` - 初始数据

---

## 🔧 后端启动

### 方法一：使用 IDEA（推荐）

1. 用 IntelliJ IDEA 打开 `supermarket-backend` 项目
2. 配置数据库连接（`application.yml`）：
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/supermarket_system
       username: root
       password: your_password  # 修改为你的密码
   ```
3. 启动 Redis（如果有）或注释掉 Redis 配置
4. 运行 `SupermarketApplication.java`
5. 访问接口文档：http://localhost:8080/api/doc.html

### 方法二：使用 Maven 命令

```bash
cd supermarket-backend
mvn clean install
mvn spring-boot:run
```

### 验证后端启动成功

浏览器访问：
- 接口文档（Knife4j）：http://localhost:8080/api/doc.html
- 健康检查：http://localhost:8080/api/health（如果有）

---

## 🎨 前端启动

### 方法一：使用批处理脚本（最简单）⭐

**Windows**:
```
双击运行：supermarket-frontend/启动开发服务器.bat
```

### 方法二：使用修复脚本（如果有问题）

如果遇到启动问题，先运行修复脚本：
```
双击运行：supermarket-frontend/修复启动问题.bat
```

### 方法三：手动启动

```bash
# 1. 进入前端目录
cd supermarket-frontend

# 2. 安装依赖（首次启动）
npm install

# 3. 启动开发服务器
npm run dev
```

### 验证前端启动成功

浏览器会自动打开：http://localhost:3000

如果没有自动打开，手动访问：http://localhost:3000

---

## 🔑 登录测试

### 默认账号

1. **管理员账号**:
   - 用户名: `admin`
   - 密码: `123456`
   - 权限: 所有功能

2. **普通用户账号**:
   - 用户名: `user`
   - 密码: `123456`
   - 权限: 基础功能

---

## 📱 功能测试清单

### 1. 登录模块 ✅
- [ ] 使用管理员账号登录
- [ ] 使用普通用户账号登录
- [ ] 测试错误提示（用户名/密码错误）
- [ ] 测试"记住密码"功能

### 2. 首页仪表盘 ✅
- [ ] 查看统计卡片（销售额、采购额等）
- [ ] 查看销售趋势图表
- [ ] 查看采购趋势图表
- [ ] 查看低库存商品列表
- [ ] 点击刷新按钮

### 3. 商品管理 ✅
- [ ] 查看商品列表
- [ ] 搜索商品（按名称、分类）
- [ ] 新增商品
- [ ] 编辑商品
- [ ] 删除商品
- [ ] 修改商品状态

### 4. 分类管理 ✅
- [ ] 查看分类列表
- [ ] 新增分类
- [ ] 编辑分类
- [ ] 删除分类

### 5. 用户管理 ✅
- [ ] 查看用户列表
- [ ] 新增用户
- [ ] 编辑用户信息
- [ ] 删除用户
- [ ] 启用/禁用用户
- [ ] 重置密码

### 6. 供应商管理 ✅
- [ ] 查看供应商列表
- [ ] 新增供应商
- [ ] 编辑供应商
- [ ] 删除供应商

### 7. 采购管理 ✅
- [ ] 查看采购订单列表
- [ ] 新增采购单
  - [ ] 选择供应商
  - [ ] 添加多个商品
  - [ ] 查看总金额计算
- [ ] 确认入库
- [ ] 删除采购单

### 8. 销售管理 ✅
- [ ] 查看销售订单列表
- [ ] 新增销售单
  - [ ] 输入客户信息
  - [ ] 添加多个商品
  - [ ] 查看总金额计算
- [ ] 确认出库
- [ ] 删除销售单

### 9. 库存管理 ✅
- [ ] 查看库存列表
- [ ] 查看库存统计卡片
- [ ] 搜索库存（按商品名、分类）
- [ ] 库存调整（入库/出库）
- [ ] 查看库存预警

---

## 🔍 接口测试（使用 Apifox）

### 导入接口文档

1. 打开 Apifox
2. 新建项目："超市进销存系统"
3. 导入接口：
   - 方式一：从 Swagger URL 导入
     - URL: http://localhost:8080/api/v2/api-docs
   - 方式二：手动创建接口（参考后端 Controller）

### 测试顺序

1. **认证接口**:
   ```
   POST /api/auth/login
   Body: {"username": "admin", "password": "123456"}
   获取 token
   ```

2. **设置全局 Token**:
   - 复制响应中的 `token`
   - 在 Apifox 中设置环境变量：`token`
   - 后续请求自动携带 Header: `Authorization: Bearer {{token}}`

3. **测试其他接口**:
   - 分类管理接口
   - 商品管理接口
   - 供应商管理接口
   - 采购管理接口
   - 销售管理接口
   - 库存管理接口
   - 统计分析接口

---

## ⚠️ 常见问题

### 1. 后端启动失败

**问题**：数据库连接失败
```
Error: Could not connect to MySQL
```

**解决**：
1. 检查 MySQL 是否启动
2. 检查 `application.yml` 中的数据库配置
3. 确认数据库已创建：`supermarket_system`
4. 确认用户名密码正确

---

**问题**：Redis 连接失败
```
Error: Could not connect to Redis
```

**解决**：
1. 启动 Redis 服务
2. 或者临时注释掉 Redis 配置：
   ```yaml
   spring:
     redis:
       enabled: false  # 添加这一行
   ```

---

**问题**：Knife4j 启动报错
```
NullPointerException: Cannot invoke PatternsRequestCondition.getPatterns()
```

**解决**：
已修复！确保 `application.yml` 包含：
```yaml
spring:
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
```

---

### 2. 前端启动失败

**问题**：Vite CJS 警告 + crypto 错误
```
The CJS build of Vite's Node API is deprecated
crypto$2.getRandomValues is not a function
```

**解决**：
运行修复脚本：
```
supermarket-frontend/修复启动问题.bat
```

或者手动修复：
```bash
cd supermarket-frontend
rmdir /s /q node_modules
del package-lock.json
npm install
npm run dev
```

---

**问题**：API 导入错误
```
No matching export in "src/api/xxx.js" for import "default"
```

**解决**：
已修复！所有 API 文件已添加默认导出。

---

**问题**：端口被占用
```
Port 3000 is already in use
```

**解决**：
修改 `vite.config.js`：
```javascript
server: {
  port: 5173  // 改为其他端口
}
```

---

### 3. 功能测试问题

**问题**：登录后跳转失败

**解决**：
1. 检查后端是否正常运行
2. 打开浏览器控制台查看错误
3. 检查 Token 是否正确存储（Application -> Local Storage）

---

**问题**：接口调用失败（404）

**解决**：
1. 确认后端接口路径正确
2. 检查 Vite 代理配置（`vite.config.js`）
3. 查看浏览器 Network 面板

---

**问题**：数据不显示

**解决**：
1. 确认数据库有初始数据
2. 打开浏览器控制台查看 API 响应
3. 检查后端日志

---

## 📊 系统架构

```
┌─────────────┐      HTTP/HTTPS      ┌─────────────┐
│   浏览器    │ ──────────────────► │  Vue 3 前端 │
│  (Chrome)   │                      │ (Port 3000) │
└─────────────┘                      └─────────────┘
                                           │
                                           │ Axios
                                           ▼
                                     ┌─────────────┐
                                     │ Spring Boot │
                                     │   后端 API  │
                                     │ (Port 8080) │
                                     └─────────────┘
                                           │
                         ┌─────────────────┼─────────────────┐
                         ▼                 ▼                 ▼
                   ┌──────────┐      ┌──────────┐    ┌──────────┐
                   │  MySQL   │      │  Redis   │    │ Knife4j  │
                   │ Database │      │  Cache   │    │   文档   │
                   └──────────┘      └──────────┘    └──────────┘
```

---

## 🎯 快速启动流程

### 最简单的启动方式：

```bash
# 1. 启动 MySQL 和 Redis
# （Windows：启动服务；macOS/Linux：systemctl start）

# 2. 导入数据库
# 使用 DataGrip 执行 sql/schema.sql 和 sql/data.sql

# 3. 启动后端
cd supermarket-backend
mvn spring-boot:run

# 4. 启动前端（新终端窗口）
cd supermarket-frontend
npm run dev

# 5. 访问系统
# 前端：http://localhost:3000
# 后端文档：http://localhost:8080/api/doc.html
```

---

## 📚 相关文档

- [前端启动问题解决方案.md](前端启动问题解决方案.md) - 详细的前端问题排查
- [修复记录.md](修复记录.md) - API 导出问题修复记录
- [前端开发完成情况.md](前端开发完成情况.md) - 前端开发详情
- [后端开发完成总结.md](后端开发完成总结.md) - 后端开发详情
- [Apifox接口测试指南.md](Apifox接口测试指南.md) - 接口测试指南

---

## ✨ 特色功能

### 1. 现代化 UI 设计
- 渐变色背景
- 磨砂玻璃效果
- 流畅动画过渡
- 响应式布局

### 2. 数据可视化
- ECharts 图表
- 实时数据更新
- 交互式图表

### 3. 完善的权限管理
- JWT Token 认证
- 角色权限控制
- 路由守卫

### 4. 智能库存管理
- 库存预警
- 自动计算
- 批量操作

---

## 🎊 开发完成情况

| 模块 | 后端 | 前端 | 状态 |
|------|------|------|------|
| 用户认证 | ✅ | ✅ | 完成 |
| 用户管理 | ✅ | ✅ | 完成 |
| 分类管理 | ✅ | ✅ | 完成 |
| 商品管理 | ✅ | ✅ | 完成 |
| 供应商管理 | ✅ | ✅ | 完成 |
| 采购管理 | ✅ | ✅ | 完成 |
| 销售管理 | ✅ | ✅ | 完成 |
| 库存管理 | ✅ | ✅ | 完成 |
| 统计分析 | ✅ | ✅ | 完成 |

**总进度**：✅ 100% 完成

---

## 🚀 下一步计划

- [ ] 集成测试
- [ ] 性能优化
- [ ] 部署到生产环境
- [ ] 配置 Nginx 反向代理
- [ ] 添加更多报表功能
- [ ] 移动端适配优化

---

## 📞 获取帮助

如果遇到问题：
1. 查看相关文档
2. 检查浏览器控制台
3. 查看后端日志
4. 参考常见问题解决方案

---

**祝您使用愉快！** 🎉


